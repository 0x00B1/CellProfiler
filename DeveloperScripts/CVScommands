{\rtf1\mac\ansicpg10000\cocoartf102
{\fonttbl\f0\fswiss\fcharset77 Helvetica;\f1\fmodern\fcharset77 Courier;}
{\colortbl;\red255\green255\blue255;}
\margl1440\margr1440\vieww13200\viewh15380\viewkind0
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\ql\qnatural

\f0\fs24 \cf0 \ul \ulc0 CVS Commands\ulnone \
Overall, to reconcile your local copy with the central cvs copy, first update yourself (retrieve other people's changes), then check for differences between your version and the central version (optional), then commit (submit your changes to the central version).\
\
In terminal, change to the directory where CellProfiler resides.\
\ul To update:\ulnone  cvs update\
\
\ul To show what differences exist between your copy and the last central copy you checked out: \ulnone cvs diff\
\
\ul To show what differences exist between particular revision numbers\ulnone \
cvs diff -r REVNUMBER REVNUMBER  (providing only one revision number will compare to your locally modified copy, I think)\
\
\ul To obtain revision numbers:\
\ulnone cvs log Filename.m\
\
\ul To commit changes one by one: (\ulnone leave off the specific filename to commit all)\
cvs commit -m "Description of this change" filename.m\
\ul \
To add a file which is not already in the central copy:\ulnone \
cvs add filename.m\
(this only adds it to your local cvs list, not the central one, so the next step is to cvs commit)\
\
\ul To add a directory\
\ulnone cvs add and cvs commit as if it were a file. Then login to oblique by ssh, navigate to the directory containing the new directory and change its group to cellprofiler. Also, change the group of the contents of that directory:\ul \
\ulnone carpenter@oblique:/home/CellProfiler/CellProfiler/DeveloperDropBox$ chgrp cellprofiler NewFolderName\
\ul If there are conflicts,\ulnone  your local copy of the file will have the conflicts identified by lots of equal signs, the lines marked with the file name is my own version.  Correct any conflicts by hand and then commit again.\
\
\ul To lock a file so that only you can commit to it:\ulnone \
cvs admin -l filename\
When you check in a new version, the lock will be unlocked by default,\
so you'll have to do it again.\
\
\ul To CVS update the Cluster's CellProfiler: \ulnone (I think this should never be necessary - typically we can just overwrite the cluster's version of CellProfiler with a copy of our local version of CellProfiler)\
In terminal:\
ssh oblique.lcs.mit.edu\
ssh thouis@p0\
cd CellProfiler\
cvs update\
\
\ul To remove a file from the repository:\
\ulnone cvs update filename.m\
move the file from the directory\
cvs remove filename.m\
cvs commit filename.m\
\
\ul To rename a file without losing all the CVS history:\
\ulnone Of course you can cvs add with the new name and cvs remove the old name, but this will lose all the CVS history.  So instead, you need to go to the computer which has the repository: \
cp oldfile.c,v newfile.c,v\
now go to your working directory and do a cvs update; newfile.c will appear as a new file. Now you can cvs delete oldfile.c and commit.\
\
\ul To see a list of all files and their status:\
\ulnone cvs status\
\
\ul To set up a computer with the CellProfiler directory cvs'd (for Mac):\
\ulnone In Terminal:   \
ssh-keygen -t dsa, then Enter to allow the defaults it suggests (no passphrase).\
cd .ssh\
cat id_dsa.pub (to print out the contents of that file: email to Ray)\
Then you should be able to:\
ssh cellprofiler@oblique.lcs.mit.edu\
then cd to the folder where you want the CellProfiler folder to go.\
edit the profile file which should be in "etc" folder by\
type "export CVS_RSH=ssh" and saving (make sure you have write access)\
or typing "
\f1 echo "export CVS_RSH=ssh" >> ~/.profile" into the terminal\
Now, if you type "env | grep CVS", "CVS_RSH=ssh" should be printed\
Type "cvs -d :ext:cellprofiler@oblique.csail.mit.edu:/home/CellProfiler co"\
\

\f0 \ul To set up a computer with the CellProfiler directory cvs'd (for PC):\

\f1 \ulnone Download and install TortoiseCVS from www.tortoisecvs.org\
Download and install puttygen from www.chiark.greenend.org.uk/~sgtatham/putty/download.html\
Generate a private/public key pair using puttygen and email Ray the public one\
Download and install pageant from the same website you downloaded puttygen\
Add the private key from puttygen to pageant\
After Ray adds the public key, right click on a windows folder and click CVS checkout\
type :ext:cellprofiler@oblique.csail.mit.edu:/home/CellProfiler for CVSRoot\
and CellProfiler for module\

\f0 \
\ul [[[NEW INSTRUCTIONS]]]\
\ulnone How to set up CVS access for fictional user "bob" on some remote machine\
\
- On the cellprofilerg5-2 machine:\
  - create a new user "bob" via "System Preferences" / "Accounts" (+ at the bottom left). The full name can be "Bob Smith". Note that the short name should match your name on the computer from which you will be working most often ("bob"). You can find this name by typing "whoami" at the command line of Terminal on the remote machine, when logged in as bob.\
\
- On the remote machine, in a terminal (be sure you are logged in as bob):\
  - check if ~/.ssh/id_dsa.pub exists using "ls ~/.ssh"\
  - if not, run "ssh-keygen -t dsa"  (not sure what to do on windows)\
  - copy the key to cellprofilerg5-2 with:\
    scp ~/.ssh/id_dsa.pub bob@cellprofilerg5-2:temp-key \
    (type "yes" if it asks about adding a host key)\
\
- On the cellprofilerg5-2 machine\
  - log in as bob, open a terminal\
  - append the key to the authourized keys with:\
    mkdir ~/.ssh\
    cat temp-key >> ~/.ssh/authorized_keys\
\
- On the remote machine\
  - cd to the parent directory where you want the code to live. You do not need to create a CellProfiler folder, this will be done automatically. The normal location is /Applications on Macs or C:\\ProgramFiles on PCs.\
  - make sure CVS_RSH=ssh is set (see other instructions or Anne)\
  - check out the code with\
    cvs -d :ext:bob@cellprofilerg5-2:/Users/cellprofileruser/CellProfilerCVS co CellProfiler\
\
\
\ul To back out a change:\
\ulnone 1. get the revision number of the current revision and the bad revision using cvs log. \
2. cvs update -j 1.5 -j 1.4 filename\
where 1.5 is the new, bad revision and 1.4 is the old, good revision\
3. cvs commit filename\
\
\ul To copy the entire repository from oblique to cellprofilerg5-2:\
\ulnone on the g5:\
scp -r cellprofiler@oblique.csail.mit.edu:/home/CellProfiler/CVS /Users/cellprofileruser/CellProfilerCVS\
scp -r cellprofiler@oblique.csail.mit.edu:/home/CellProfiler/CellProfiler /Users/cellprofileruser/CellProfilerCVS\
chmod -R a+rw /Users/cellprofileruser/CellProfilerCVS\
}