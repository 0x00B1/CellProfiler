Mike's TODO list

Strangely, I can't use my email right now but SVN is still working...I'll put the PIPE mentioned inthe dev. drop box.
---------------
Hi!
nanmean is a function only available in the statistics toolbox (which i don't have a license for on my laptop). We'd like to only require the user to have Matlab + image proc toolbox.  Can you make a CPnanmean function and commit it?

Also, I ran the attached pipeline on the first two image sets in ExampleFlyImages, then tried Data Tools > Export Data, with the option - not ignoring NaNs (since I don't have that function). I get an error: index exceeds matrix dimensions, somewhere in the loops around line 300.  Can you check what the problem is there?

Perhaps it's related to this - In MeasureRatios, we need to rearrange the output a bit...Currently, it's:
handles.Measurements.Ratios.Cytoplasm_I_1_dividedby_Nuclei_I_1: {[0.7548]  [1.3635]}
handles.Measurements.Ratios.Cytoplasm_I_1_Features_dividedby_Nuclei_I_1_Feature: {'Cytoplasm_I_1_dividedby_Nuclei_I_1'}

Whatever two things the user divides, they must have the same number of entries. So, it's safe to store the resulting ratios within one of the objects' already existing measurement structure. I'd suggest we store the ratios in the numerator object's measurement structure. For example, in the example pipeline, it ought to be this:
handles.Measurements.Cytoplasm.Ratios = {[0.7548]  [1.3635]}
handles.Measurements.Cytoplasm.RatiosFeatures = {'Cytoplasm_I_1_dividedby_Nuclei_I_1'}

Then, if another Ratio is calculated with cytoplasm as the numerator, it gets to be the second column of data. See the results of MeasureObjectIntensity to see how it's done.  Does this all make sense?

Also, Make sure there's an error check in MeasureRatios that catches if the incoming objects (or 'image') do not have the same number of objects, e.g. they try to divide a whole image measurement by a nucleus measurement, or they try to divide nuclei/cytoplasm but there's a slightly different number of those objects in the image.
-a

--------------------------



- (Requested by Anne 09-08-05) - I helped someone setup CP on a PC (Windows XP, with Matlab 7.04.365 SP2 R14) and ran into a couple of bugs. Not sure if they will reproduce but can you check on them:

* I'm not sure the timer units were accurate - it said it was taking 1 second per image set but it seemed more like 5-10 seconds. Is there some weird conversion?  Also, for the popup window at the end which tells us the breakdown for the entire set that was processed, each module's avg time is listed in seconds but no units were listed for the first image set or whatever else is listed at the top. Perhaps these issues were because we 'canceled after cycle' partway through, so the calculations were based on the total number of image sets rather than the number we actually processed?

E-MAILED MATHWORKS * The slider in the main GUI, when there are lots of variables, was backwards!  I thought this was fixed - I remember it seemed to be backwards depending on whether you're using PC vs Mac, but I thought it was working fine on your PC recently. i wonder if it's an XP issue?

* Not a bug, but on his computer it takes forever every time the code has to look up the list of images in the selected directory.  Can you make sure we aren't doing this redundantly?  I know we check through all the files when you choose the directory in the main GUI (so it's displayed in the list box), and then we check through the files when you click analyze images to make sure the file list hasn't changed (in case you moved files in the meantime), but i wonder if also the load images module is checking through things unnecessarily.  You might want to doublecheck any changes with me since this is a critical thing!

DONE * We had trouble with ExportData data tool when trying to export his data that had Image and Cells data (e.g. it had Load, IdentifyPrimAuto, and MeasureObjectsAreaShape) - the Cells excel file seemed fine, but the Image one failed because one of the first columns is 'pathname' which on the PCC has backslashes, but these are read funny in excel as column breaks.  We also got the command line error in matlab:
Export Data > Write Measurements in line 378
Export Data at line 75
See help for sprintf for valid escape sequences.

If you need to get an example output file (might be a pain b/c too big to email?) you can email Winston at timp@wi.mit.edu

- Add ray's new adjustment to SecProp function for secondary distance